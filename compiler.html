<!DOCTYPE html>
<html lang="es">
  <head>
    <title>Anchor Less | Compiler</title>
    <meta charset="utf-8">
    <meta name="author" content="invader365">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no">
    <meta name="keywords" content="anchorLess, anchor, less, mixins, assets, utilities, library, css">
    <meta name="description" content="Anchor less is a collection of less Mixins, Assets and Utilities. These enables you to create blocks of reusable css, avoiding duplication of code and making it more maintenable. ">
    <meta property="og:title" content="Anchor Less">
    <meta property="og:description" content="Anchor less is a collection of less Mixins, Assets and Utilities. These enables you to create blocks of reusable css, avoiding duplication of code and making it more maintenable. ">
    <meta property="og:image" content="http://invader365.github.io/anchorLESS/images/logo-main-small.png">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://invader365.github.io/anchorLESS">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-172056438-1"></script>
    <script src="js/gtag.js"></script>
    <script src="js/analytics.js"></script>
    <link href="img/favicon.ico" type="image/x-icon" rel="shortcut icon">
    <link href="fonts/FontAwesome/css/font-awesome.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
    <style type="text/css" class="style css"></style>
    <script src="js/libs/jquery-1.11.1.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/3.11.1/less.min.js" type="text/javascript"></script>
  </head>
  <body class="uno l-right-top-nav compiler">
    <header>
      <section class="max-width">
        <div class="m-brand">
          <h1><a href="index.html"><img src="img/logo-main.png"><strong>Anchor Less</strong></a></h1>
        </div>
        <div class="m-sidemenu hide"><a href="#" class="toggle js-navbar"><i class="fa fa-bars"></i></a></div>
      </section>
    </header>
    <nav>
      <section class="max-width">
        <div class="m-mainnav navbar primary">
          <ul class="lined-up">
            <li class="reference"><a href="reference.html">Reference</a></li>
            <li class="usage"><a href="usage.html">Usage</a></li>
            <li class="compiler"><a href="compiler.html">Compiler<span class="badge"></span></a></li>
          </ul>
        </div>
      </section>
    </nav>
  </body>
  <main style="min-height:800px" class="panel primary">
    <section class="max-width">
      <h2 class="title">Live-Compiler</h2>
      <div class="toggle"><a onclick="showHide()" class="no-select">Demo</a>
        <div style="display:none" class="result">
          <div class="box">box</div>
        </div>
      </div>
      <div class="grid split-2 separate">
        <div class="span">
          <h4>LESS</h4>
          <div class="panel--primary"><code contenteditable="true" onkeyup="compileCSS()" spellcheck="false" class="code less"></code></div>
        </div>
        <div class="span">
          <h4>CSS</h4><code class="code css"></code>
        </div>
      </div>
    </section>
  </main>
  <script>
    const pre = {
      less: `  div.box {
      .display(flex, center, center);
      .font(2em, 40px, bold);
      .rounded(5px);
      .background(#fb292d);
      .query({
        .rounded(20px);
        .size(200px, 40px);
        .spacing(0 auto, 10px);
        .gradient(#fb292d, #470103);
      }, 800px);
      }`,
      error:`Parse error: Unrecognized input`,
      typing:`...`
    };
    const compileCSS = input => {
        const codeLess = document.querySelector(`.code.less`);
        const codeCss  = document.querySelector(`.code.css`);
        const styleTag = document.querySelector(`.style.css`);
        const anchorLess = "@import './anchor.less';";
        
        if(input) codeLess.innerHTML = eval(input).less;
        styleTag.innerHTML = anchorLess + codeLess.textContent;
        styleTag.setAttribute("type", "text/less");
        less.refreshStyles();
        codeLess.addEventListener("keyup", event => {
          if (event.keyCode >= 37 && event.keyCode <= 40) { 
            event.preventDefault();
          } else {
              codeCss.innerHTML = eval(pre).typing;
          }
        });
    
        setTimeout(() => {
          codeCss.innerHTML = (styleTag.innerHTML.slice(0, 2) != '@i') ? styleTag.innerHTML : eval(pre).error
        }, 800)
    };
    compileCSS(pre);
    const showHide = () => {
      const result = document.querySelector(`.result`);
      result.style.display = (result.style.display === 'block') ? 'none' : 'block';
    }
  </script>
  <footer>
    <section class="max-width">
      <div class="m-legal">
        <p class="copy">Copyright Â© AnchorLess 2020.</p>
      </div>
    </section>
  </footer>
</html>